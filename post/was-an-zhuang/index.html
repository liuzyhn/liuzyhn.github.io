<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>was安装 | 学无止境</title>
<meta name="description" content="人生不穷,
有志为根.
学海无涯,唯勤是岸.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://blog.liuzyhn.top/favicon.ico?v=1566744514455">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://blog.liuzyhn.top/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://blog.liuzyhn.top">
        <img src="https://blog.liuzyhn.top/images/avatar.png?v=1566744514455" class="site-logo">
        <h1 class="site-title">学无止境</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      人生不穷,
有志为根.
学海无涯,唯勤是岸.
    </div>
    <div class="site-footer">
      中国 🇨🇳 | <a class="rss" href="https://blog.liuzyhn.top/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">was安装</h2>
            <div class="post-date">2019-08-25</div>
            
            <div class="post-content">
              <h1 id="was安装">was安装</h1>
<h2 id="一-网络工具等安装">一. 网络工具等安装：</h2>
<pre><code>yum install -y gcc make crypto-utils net-tools wget zip unzip
</code></pre>
<h2 id="二-iim-ibm-installation-manager-安装">二. IIM (IBM Installation Manager) 安装</h2>
<h3 id="安装包">安装包：</h3>
<pre><code>package/agent/agent.installer.linux.gtk.x86_64_1.8.9002.20181015_1517.zip
</code></pre>
<h3 id="安装命定">安装命定：</h3>
<pre><code>./con-disk-set-inst.sh -silent -acceptLicense -nl zh -installationDirectory /opt/IBM/InstallationManager/eclipse
</code></pre>
<p>第1步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent1.png" alt=""></br><br>
输入 <code>N</code> 回车</p>
<p>第2步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent2.png" alt=""></br><br>
输入 <code>A</code> 回车</p>
<p>第3步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent3.png" alt=""></br><br>
输入 <code>A</code> 回车</p>
<p>第4步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent4.png" alt=""></br><br>
输入 <code>N</code> 回车</p>
<p>第5步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent5.png" alt=""></br><br>
输入 <code>N</code> 回车</p>
<p>第6步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent6.png" alt=""></br><br>
输入 <code>I</code> 回车</p>
<p>第7步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent7.png" alt=""></br><br>
输入 <code>R</code> 回车</p>
<p>第8步响应</br><img src="https://blog.liuzyhn.top/post-images/was/agent8.png" alt=""></br><br>
输入 <code>X</code> 回车</p>
<p>安装完成</p>
<h2 id="三-安装介质包">三. 安装介质包</h2>
<ol>
<li>
<p>安装包：</p>
<p>package/jzb/WASND_v8.5.5_1of3.zip </br><br>
package/jzb/WASND_v8.5.5_2of3.zip </br><br>
package/jzb/WASND_v8.5.5_3of3.zip </br></p>
</li>
<li>
<p>解压介质包到： /opt/package/was/jzb/WASND_v8.5.5</p>
</li>
<li>
<p>解压完文件列表<img src="https://blog.liuzyhn.top/post-images/was/wasnd.png" alt=""></p>
</li>
<li>
<p>获取软件包标识，下面安装需要用到此参数：</p>
</li>
</ol>
<pre><code>cd /opt/IBM/InstallationManager/eclipse/tools
./imcl listAvailablePackages -repositories /opt/package/was/jzb/WASND_v8.5.5
</code></pre>
<p>执行结果<img src="https://blog.liuzyhn.top/post-images/was/wasnd1.png" alt=""></p>
<ol start="5">
<li>安装was介质包</li>
</ol>
<pre><code>cd /opt/IBM/InstallationManager/eclipse/tools
./imcl install com.ibm.websphere.ND.v85_8.5.5000.20130514_1044 \
-repositories /opt/package/was/jzb/WASND_v8.5.5/repository.config \
-installationDirectory /opt/IBM/WebSphere/AppServer \
-sharedResourcesDirectory /opt/IBM/IMShared \
-properties cic.selector.nl=zh \
-acceptLicense \
-showVerboseProgress
</code></pre>
<p>执行结果,有个警告不影响<img src="https://blog.liuzyhn.top/post-images/was/wasnd2.png" alt=""></p>
<h2 id="四-通过升级包升级到-85514">四. 通过升级包升级到 8.5.5.14</h2>
<ol>
<li>升级包下载地址：</li>
</ol>
<pre><code>https://ak-delivery04-mul.dhe.ibm.com/sar/CMA/WSA/07qzk/0/8.5.5-WS-WAS-FP014-part1.zip
https://ak-delivery04-mul.dhe.ibm.com/sar/CMA/WSA/07qzo/0/8.5.5-WS-WAS-FP014-part2.zip
https://ak-delivery04-mul.dhe.ibm.com/sar/CMA/WSA/07qzp/0/8.5.5-WS-WAS-FP014-part3.zip
</code></pre>
<ol start="2">
<li>
<p>升级包：<br>
package/fix/8.5.5-WS-WAS-FP014-part1.zip<br>
package/fix/8.5.5-WS-WAS-FP014-part2.zip<br>
package/fix/8.5.5-WS-WAS-FP014-part3.zip</p>
</li>
<li>
<p>解压后到： /opt/package/was/fix/85514was</p>
</li>
</ol>
<p>解压后内容<img src="https://blog.liuzyhn.top/post-images/was/85514was.png" alt=""></p>
<ol start="4">
<li>安装升级包：</li>
</ol>
<pre><code>cd /opt/IBM/InstallationManager/eclipse/tools
./imcl updateAll \
-repositories /opt/package/was/fix/85514was/repository.config \
-installationDirectory /opt/IBM/WebSphere/AppServer/ \
-acceptLicense \
-showVerboseProgress
</code></pre>
<p>执行结果<img src="https://blog.liuzyhn.top/post-images/was/85514was-update.png" alt=""></p>
<ol start="5">
<li>安装成功后，查看was版本是否为8.5.5.2：</li>
</ol>
<pre><code>cd /opt/IBM/WebSphere/AppServer/bin/
./versionInfo.sh
</code></pre>
<p>执行结果<img src="https://blog.liuzyhn.top/post-images/was/versionInfo.png" alt=""></p>
<h2 id="五-was用命令创建节点">五. WAS用命令创建节点</h2>
<ol>
<li>利用模板创建profile dmgr</li>
</ol>
<pre><code>cd /opt/IBM/WebSphere/AppServer/bin/
./manageprofiles.sh -create \
-templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/dmgr \
-profilePath /opt/IBM/WebSphere/AppServer/profiles/Dmgr01 \
-enableAdminSecurity true \
-profileName Dmgr01 \
-adminUserName admin \
-adminPassword 11111
</code></pre>
<p><code>hostname</code> 指的是主机名</p>
<p>执行结果<img src="https://blog.liuzyhn.top/post-images/was/profile-dmgr1.png" alt=""></p>
<p>概要文件的更多信息，查阅:</p>
<p>cat /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/logs/AboutThisProfile.txt</p>
<p>查阅结果<img src="https://blog.liuzyhn.top/post-images/was/dmgr01-AboutThisProfile.png" alt=""></p>
<ol start="2">
<li>启动 profile dmgr</li>
</ol>
<pre><code>cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin/
./startManager.sh
</code></pre>
<p>执行结果<img src="https://blog.liuzyhn.top/post-images/was/dmgr-start.png" alt=""></p>
<ol start="2">
<li>
<p>建立custom的profile<br>
https://www.cnblogs.com/lyr2012/archive/2012/06/12/2546300.html</p>
<p>使用的模版为 /opt/IBM/WebSphere/AppServer/profileTemplates/managed</p>
</li>
</ol>
<pre><code>cd /opt/IBM/WebSphere/AppServer/bin/
./manageprofiles.sh -create \
-templatePath /opt/IBM/WebSphere/AppServer/profileTemplates/managed \
-profilePath /opt/IBM/WebSphere/AppServer/profiles/AppSrv01 \
-profileName AppSrv01

cd /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin
./addNode.sh 127.0.0.1 -username admin -password 11111
</code></pre>
<p>172.31.142.156 是服务器ip</p>
<p>建立custom的profile结果 <img src="https://blog.liuzyhn.top/post-images/was/appsrv01.png" alt=""><br>
添加节点结果 <img src="https://blog.liuzyhn.top/post-images/was/addnode1.png" alt=""></p>
<ol start="3">
<li>启动AppSrv01节点</li>
</ol>
<pre><code>cd /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/bin
./startNode.sh
</code></pre>
<p>执行结果： 响应失败 其实已经成功 在页面可以访问到该节点<img src="https://blog.liuzyhn.top/post-images/was/startnode0.png" alt=""><br>
截图<img src="https://blog.liuzyhn.top/post-images/was/startnode1.png" alt=""></p>
<h2 id="六-新建服务器-及配置">六. 新建服务器、及配置</h2>
<p>以cs为例：</p>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/server1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/server2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/server3.png" alt=""></br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/server4.png" alt=""></br><br>
图5 <img src="https://blog.liuzyhn.top/post-images/was/server5.png" alt=""></br></p>
<p>特定于服务器的应用程序设置 图6 <img src="https://blog.liuzyhn.top/post-images/was/server6.png" alt=""></br><br>
web容器设置：<br>
图7-1 <img src="https://blog.liuzyhn.top/post-images/was/server7-1.png" alt=""> </br><br>
图7-2 <img src="https://blog.liuzyhn.top/post-images/was/server7-2.png" alt=""> </br><br>
图7-3 <img src="https://blog.liuzyhn.top/post-images/was/server7-3.png" alt=""> </br><br>
com.ibm.ws.webcontainer.extractHostHeaderPort=true </br><br>
trusthostheaderport=true </br></p>
<p>图8-1 <img src="https://blog.liuzyhn.top/post-images/was/server8-1.png" alt=""> </br><br>
图8-2 <img src="https://blog.liuzyhn.top/post-images/was/server8-2.png" alt=""> </br><br>
org.hibernate.jpa.HibernatePersistenceProvider</p>
<p>图9-1 <img src="https://blog.liuzyhn.top/post-images/was/server9-1.png" alt=""> </br><br>
图9-2 <img src="https://blog.liuzyhn.top/post-images/was/server9-2.png" alt=""> </br><br>
图9-3 <img src="https://blog.liuzyhn.top/post-images/was/server9-3.png" alt=""> </br></p>
<p>图10-1 <img src="https://blog.liuzyhn.top/post-images/was/server10-1.png" alt=""> </br><br>
图10-2 <img src="https://blog.liuzyhn.top/post-images/was/server10-2.png" alt=""> </br><br>
图10-3 <img src="https://blog.liuzyhn.top/post-images/was/server10-3.png" alt=""> </br><br>
图10-4 <img src="https://blog.liuzyhn.top/post-images/was/server10-4.png" alt=""> </br><br>
com.ibm.websphere.persistence.ApplicationsExcludedFromJpaProcessing</p>
<p>图10-5 <img src="https://blog.liuzyhn.top/post-images/was/server10-5.png" alt=""> </br><br>
图10-6 <img src="https://blog.liuzyhn.top/post-images/was/server10-6.png" alt=""> </br><br>
com.ibm.websphere.persistence.ApplicationsExcludedFromJpaProcessing</p>
<h2 id="七-配置修改-优化">七. 配置修改、优化</h2>
<ol>
<li>部署内存：</li>
</ol>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/deployment-manager1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/deployment-manager2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/deployment-manager3.png" alt=""></br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/deployment-manager4.png" alt=""></br><br>
图5 <img src="https://blog.liuzyhn.top/post-images/was/deployment-manager5.png" alt=""></br></p>
<ol start="2">
<li>服务器内存：</li>
</ol>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/server-manager1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/server-manager2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/server-manager3.png" alt=""></br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/server-manager4.png" alt=""></br><br>
图5 <img src="https://blog.liuzyhn.top/post-images/was/server-manager5.png" alt=""></br></p>
<ol start="3">
<li>虚拟主机添加端口开放:<br>
<br>
用途：<br>
cu: 7080<br>
cs: 7081<br>
cb: 7082<br>
cc: 7083<br>
ce: 7084<br>
urule: 7085</li>
</ol>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/virtual_host_port1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/virtual_host_port2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/virtual_host_port3.png" alt=""></br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/virtual_host_port4.png" alt=""></br><br>
图5 <img src="https://blog.liuzyhn.top/post-images/was/virtual_host_port5.png" alt=""></br></p>
<ol start="4">
<li>修改服务器http端口:</br><br>
<br>
以cu为例：</li>
</ol>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/server_port1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/server_port2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/server_port3.png" alt=""></br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/server_port4.png" alt=""></br></p>
<h2 id="八-添加数据库驱动-jpa共享库">八. 添加数据库驱动、jpa共享库</h2>
<pre><code>antlr-2.7.7.jar 
geronimo-jta_1.1_spec-1.1.1.jar
hibernate-entitymanager-5.1.0.Final.jar
javassist-3.20.0-GA.jar
validation-api-1.1.0.Final.jar
classmate-1.3.0.jar
hibernate-commons-annotations-5.0.1.Final.jar
hibernate-jpa-2.1-api-1.0.0.Final.jar
javax.el-api-3.0.0.jar
dom4j-1.6.1.jar
hibernate-core-5.1.0.Final.jar
hibernate-validator-5.2.4.Final.jar
jboss-logging-3.3.0.Final.jar
</code></pre>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/db2_shared1.png" alt=""> </br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/db2_shared2.png" alt=""> </br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/db2_shared3.png" alt=""> </br><br>
图4 <img src="https://blog.liuzyhn.top/post-images/was/db2_shared4.png" alt=""> </br></p>
<h2 id="九-新建应用-及配置">九. 新建应用、及配置</h2>
<p>以cu为例:</p>
<p>图1 <img src="https://blog.liuzyhn.top/post-images/was/addapp1.png" alt=""></br><br>
图2 <img src="https://blog.liuzyhn.top/post-images/was/addapp2.png" alt=""></br><br>
图3 <img src="https://blog.liuzyhn.top/post-images/was/addapp3.png" alt=""></br></p>
<p>共享库:<br>
图5 <img src="https://blog.liuzyhn.top/post-images/was/addapp5.png" alt=""> </br><br>
图6 <img src="https://blog.liuzyhn.top/post-images/was/addapp6.png" alt=""> </br></p>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://blog.liuzyhn.top/post/urlsource">
                  <h3 class="post-title">
                    链接资源
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: 'ac7ca979526c2aac4403',
        clientSecret: '2aa26bb1921e4e73b9a1548335a24ea001023a8e',
        repo: 'liuzyhn.github.io',
        owner: 'liuzyhn',
        admin: ['liuzyhn'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
